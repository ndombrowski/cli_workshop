{
  "hash": "1d22e9b393d88df6e35feb9857e2fa55",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"My report  for analysis X (project title)\"\n\nauthor: Nina Dombrowski\ndate: 12/18/2023\n\nformat:\n  html:\n    embed-resources: true\n\ntoc: true\ntoc-depth: 2\n\nexecute:\n  eval: false\n\nengine: knitr\n---\n\n\n## Description\n\nThe goal of this workflow is to analyse sequencing data received on 23.01.2022 from Data Science Sequencing Centre. The sequencing data consists of 8 samples, 4 control samples and 4 sulfur-treatments. The code below documents the cleaning of the sequences and the analyses run in QIIME.\n\n## Pre-requisites\n\nAll analyses were run on an HPC with an CentOS 7 operating system.\n\nDependencies:\n\n-   FastQC v0.11.9 (pre-installed)\n-   seqkit v2.6.1\n-   ...\n\nInstallation of software that was not pre-installed:\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nmamba create -n seqkit_2.6.1\nmamba install -n seqkit_2.6.1 -c bioconda seqkit=2.6.1\n```\n:::\n\n\n## Analysis workflow\n\n### Setup working directory\n\n\n::: {.cell}\n\n```{.bash .cell-code}\n#path to working directory\ncd /path_to_folder_you_analyse_the_data\n\n#activate conda environment \nmamba activate seqkit_2.6.1\n\n#custom variables \ndownload_link=\"https://github.com/ndombrowski/cli_workshop/raw/main/data/seq_project.tar.gz\"\n```\n:::\n\n\n### Download the sequencing data\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nmkdir data\nmkdir scripts \nmkdir logs \n\n#download data using link provided by the sequencing center on 23.01.2023\nwget -P data $download_link\ntar -xvf data/seq_project.tar.gz -C data\nrm data/*.tar.gz\n\n#generate a list for the files we work with \nls data/seq_project/*/*.gz | cut -f4 -d \"/\" > samples.txt\n```\n:::\n\n\n### Perform sanity checks\n\n\n::: {.cell}\n\n```{.bash .cell-code}\n#we work with 8 files\nwc -l samples.txt\n\n#we have as many R1 as we have R2 files\nls data/seq_project/*/*R1* | wc -l\nls data/seq_project/*/*R2* | wc -l\n\n#the sequence header looks as expected\nzcat data/seq_project/*/*gz | head\n\n#R1 and R2 reads have the same number of reads \nfor i in `cat samples.txt`; do \n    echo \"$i: $(( $(zcat data/seq_project/*/$i | wc -l) /4 ))\"\ndone > read_counts_per_sample.txt \n```\n:::\n\n\nWe work with so many reads per sample:\n\nSample-DUMMY1_R1.fastq.gz: 44846\\\nSample-DUMMY1_R2.fastq.gz: 44846\\\nSample-DUMMY2_R1.fastq.gz: 19733\\\nSample-DUMMY2_R2.fastq.gz: 19733\\\nSample-DUMMY3_R1.fastq.gz: 19784\\\nSample-DUMMY3_R2.fastq.gz: 19784\\\nSample-DUMMY4_R1.fastq.gz: 24380\\\nSample-DUMMY4_R2.fastq.gz: 24380\n\n### Get read statistics\n\n#### Run FastQC\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nmkdir -p results/fastqc \n\n#Submitted batch job 8100\nsbatch scripts/run_fastqc.sh \n\nll results/fastqc/*\n```\n:::\n\n\nComments on the visual inspection of the HTML reports generated by FastQC:\n\n-   The sequence quality looks good, most reads have a phred score between 28-40 when looking at the per base quality\n-   The reads are typically 250 bp long (as expected)\n-   In the over-represented sequences no hits to Illumina adapters where found\n\n#### Run seqkit\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nmkdir -p results/seqkit \n\n#Submitted batch job 8114\nsbatch scripts/seqkit.sh\n```\n:::\n\n\nComments on the content:\n\n-   Sample Sample-DUMMY1_R2.fastq.gz had reads of only 35 length, check with the sequencing center of something went wrong or if they did some quality cleaning as before sending the sequences\n-   Other parameters look good\n\n....\n\n## Citation\n\nIf your work gets published and you provide the code for example on Github its useful to add information about how to cite your work\n\n## Contact\n\nFor questions, please contact nd\\@sds.net",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}